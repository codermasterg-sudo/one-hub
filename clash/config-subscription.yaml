# ========================================
# Clash è®¢é˜…é…ç½® - ç”Ÿäº§ç¯å¢ƒ
# ========================================
# åŠŸèƒ½ç‰¹æ€§ï¼š
# - æ”¯æŒæœºåœºè®¢é˜… URL è‡ªåŠ¨å¯¼å…¥èŠ‚ç‚¹
# - è‡ªåŠ¨åˆ·æ–°è®¢é˜…åˆ—è¡¨ï¼ˆé»˜è®¤ 1 å°æ—¶ï¼‰
# - æ™ºèƒ½é€‰æ‹©ç¾å›½èŠ‚ç‚¹ï¼ˆClaude/Anthropic ä¸“ç”¨ï¼‰
# - å¥åº·æ£€æŸ¥å’Œæ•…éšœè½¬ç§»
# - æ”¯æŒå¤šè®¢é˜…æºè´Ÿè½½
#
# ä½¿ç”¨å‰å‡†å¤‡ï¼š
# 1. ä»æ‚¨çš„æœºåœºæœåŠ¡å•†è·å– Clash è®¢é˜…é“¾æ¥
# 2. ä¿®æ”¹ä¸‹æ–¹ proxy-providers ä¸­çš„ url å­—æ®µ
# 3. å¦‚éœ€å¤šä¸ªè®¢é˜…æºï¼Œå–æ¶ˆæ³¨é‡Š backup-subscription
# 4. å¤åˆ¶æœ¬æ–‡ä»¶ä¸º config.yaml: cp config-subscription.yaml config.yaml
# 5. å¯åŠ¨æœåŠ¡: make start
# ========================================

# HTTP(S) å’Œ SOCKS5 ä»£ç†ç«¯å£
port: 7890
socks-port: 7891

# å…è®¸å±€åŸŸç½‘è¿æ¥ï¼ˆå®¹å™¨å†…éƒ¨æœåŠ¡è®¿é—®å¿…é¡»å¼€å¯ï¼‰
allow-lan: true

# Clash è¿è¡Œæ¨¡å¼
# - rule: åŸºäºè§„åˆ™åˆ†æµï¼ˆæ¨èï¼‰
# - global: å…¨å±€ä»£ç†
# - direct: å…¨å±€ç›´è¿
mode: rule

# æ—¥å¿—çº§åˆ«
# - silent: é™é»˜
# - error: ä»…é”™è¯¯
# - warning: è­¦å‘ŠåŠä»¥ä¸Š
# - info: ä¿¡æ¯åŠä»¥ä¸Šï¼ˆæ¨èï¼‰
# - debug: è°ƒè¯•ï¼ˆæ’æŸ¥é—®é¢˜æ—¶ä½¿ç”¨ï¼‰
log-level: info

# RESTful API å’Œ Dashboard
# è®¿é—®åœ°å€: http://127.0.0.1:9090/ui
# å¯ä»¥ä½¿ç”¨ Clash Dashboard å¯è§†åŒ–ç®¡ç†
external-controller: 0.0.0.0:9090

# ========================================
# è®¢é˜…é…ç½® - è¯·ä¿®æ”¹ä¸ºæ‚¨çš„è®¢é˜…é“¾æ¥
# ========================================
proxy-providers:
  # ä¸»è®¢é˜…æºï¼ˆå¿…å¡«ï¼‰
  # ä»æ‚¨çš„æœºåœºè·å– Clash è®¢é˜…é“¾æ¥åå¡«å†™åˆ°ä¸‹æ–¹ url å­—æ®µ
  my-subscription:
    type: http
    # âš ï¸ é‡è¦ï¼šè¯·æ›¿æ¢ä¸ºæ‚¨çš„å®é™…è®¢é˜…é“¾æ¥
    # è·å–æ–¹å¼ï¼šç™»å½•æœºåœº â†’ è®¢é˜…ä¸­å¿ƒ â†’ å¤åˆ¶ Clash è®¢é˜…é“¾æ¥
    # ç¤ºä¾‹æ ¼å¼ï¼šhttps://sub.example.com/link/xxxxxxxxxxxx?clash=1
    url: "https://your-subscription-url.com/link?token=change_this"

    # è‡ªåŠ¨æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰
    # 3600 = 1å°æ—¶ï¼Œ86400 = 1å¤©
    interval: 3600

    # æœ¬åœ°ç¼“å­˜è·¯å¾„ï¼ˆæ— éœ€ä¿®æ”¹ï¼‰
    path: ./subscriptions/my-subscription.yaml

    # å¥åº·æ£€æŸ¥é…ç½®
    health-check:
      enable: true
      interval: 300       # æ¯ 5 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡èŠ‚ç‚¹å¥åº·çŠ¶æ€
      url: http://www.gstatic.com/generate_204

  # å¤‡ç”¨è®¢é˜…æºï¼ˆå¯é€‰ï¼‰
  # å¦‚æœæ‚¨æœ‰å¤šä¸ªæœºåœºè®¢é˜…ï¼Œå¯ä»¥æ·»åŠ å¤‡ç”¨æºæé«˜å¯ç”¨æ€§
  # backup-subscription:
  #   type: http
  #   url: "https://backup-subscription-url.com/link?token=change_this"
  #   interval: 3600
  #   path: ./subscriptions/backup-subscription.yaml
  #   health-check:
  #     enable: true
  #     interval: 300
  #     url: http://www.gstatic.com/generate_204

# ========================================
# ä»£ç†ç»„é…ç½® - æ™ºèƒ½èŠ‚ç‚¹é€‰æ‹©ç­–ç•¥
# ========================================
proxy-groups:
  # ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹ - Claude/Anthropic æ¨è
  # è‡ªåŠ¨ä»è®¢é˜…ä¸­ç­›é€‰ç¾å›½èŠ‚ç‚¹å¹¶æµ‹é€Ÿé€‰æ‹©æœ€å¿«çš„
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
    type: url-test          # è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©æœ€å¿«èŠ‚ç‚¹
    use:
      - my-subscription     # ä½¿ç”¨ä¸»è®¢é˜…æº
      # - backup-subscription  # å¦‚æœ‰å¤‡ç”¨è®¢é˜…ï¼Œå–æ¶ˆæ³¨é‡Š
    # èŠ‚ç‚¹è¿‡æ»¤è§„åˆ™ï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰
    # åŒ¹é…åŒ…å«ä»¥ä¸‹å…³é”®è¯çš„èŠ‚ç‚¹ï¼šç¾å›½ã€USã€United States ç­‰
    filter: "(?i)ç¾å›½|US|United States|America|Los Angeles|San Francisco|Silicon Valley|New York|Seattle|Chicago"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300           # æ¯ 5 åˆ†é’Ÿæµ‹é€Ÿä¸€æ¬¡
    tolerance: 50           # å®¹å·® 50msï¼Œå»¶è¿Ÿå·®å¼‚å°äºæ­¤å€¼ä¸åˆ‡æ¢èŠ‚ç‚¹

  # ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ - å¤‡ç”¨
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
    type: url-test
    use:
      - my-subscription
    filter: "(?i)é¦™æ¸¯|HK|Hong Kong|HongKong"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50

  # ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ - å¤‡ç”¨
  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹"
    type: url-test
    use:
      - my-subscription
    filter: "(?i)æ—¥æœ¬|JP|Japan|Tokyo|Osaka"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50

  # ğŸš€ æ‰‹åŠ¨é€‰æ‹© - å¯è‡ªç”±åˆ‡æ¢ä»»æ„èŠ‚ç‚¹
  - name: "ğŸš€ æ‰‹åŠ¨é€‰æ‹©"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
      - "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹"
      - DIRECT
    use:
      - my-subscription     # ä¹Ÿå¯ä»¥æ‰‹åŠ¨é€‰æ‹©è®¢é˜…ä¸­çš„ä»»æ„èŠ‚ç‚¹

  # âš¡ è‡ªåŠ¨é€‰æ‹© - ä»æ‰€æœ‰èŠ‚ç‚¹ä¸­é€‰æœ€å¿«çš„
  - name: "âš¡ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    use:
      - my-subscription
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50

  # ========================================
  # AI æœåŠ¡ä¸“ç”¨ä»£ç†ç»„
  # ========================================

  # ğŸ¤– Claude / Anthropic ä¸“ç”¨
  # âš ï¸ é‡è¦ï¼šClaude æœåŠ¡å¼ºçƒˆå»ºè®®ä½¿ç”¨ç¾å›½èŠ‚ç‚¹
  - name: "ğŸ¤– Claude"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"      # é¦–é€‰ï¼šç¾å›½èŠ‚ç‚¹ï¼ˆæ¨èï¼‰
      - "âš¡ è‡ªåŠ¨é€‰æ‹©"        # å¤‡é€‰ï¼šè‡ªåŠ¨é€‰æ‹©
      - "ğŸš€ æ‰‹åŠ¨é€‰æ‹©"        # å¤‡é€‰ï¼šæ‰‹åŠ¨é€‰æ‹©
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"      # å¤‡é€‰ï¼šé¦™æ¸¯èŠ‚ç‚¹

  # ğŸŒ OpenAI ä¸“ç”¨
  - name: "ğŸŒ OpenAI"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
      - "âš¡ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"

  # ğŸŒ å›½é™…æµé‡ - å…¶ä»–å›½é™…æœåŠ¡
  - name: "ğŸŒ å›½é™…æµé‡"
    type: select
    proxies:
      - "âš¡ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
      - "ğŸš€ æ‰‹åŠ¨é€‰æ‹©"
      - DIRECT

  # â™»ï¸ æ•…éšœè½¬ç§» - èŠ‚ç‚¹ä¸å¯ç”¨æ—¶è‡ªåŠ¨åˆ‡æ¢
  - name: "â™»ï¸ æ•…éšœè½¬ç§»"
    type: fallback
    use:
      - my-subscription
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

# ========================================
# è·¯ç”±è§„åˆ™é…ç½® - æ™ºèƒ½åˆ†æµ
# ========================================
# è§„åˆ™åŒ¹é…é¡ºåºï¼šä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ï¼Œå‘½ä¸­å³åœæ­¢
# è§„åˆ™æ ¼å¼è¯´æ˜ï¼š
# - DOMAIN-SUFFIX: åŸŸååç¼€åŒ¹é…ï¼ˆå¦‚ .comï¼‰
# - DOMAIN-KEYWORD: åŸŸåå…³é”®è¯åŒ¹é…
# - IP-CIDR: IP åœ°å€æ®µåŒ¹é…
# - GEOIP: åœ°ç†ä½ç½®åŒ¹é…
# - MATCH: å…œåº•è§„åˆ™ï¼ŒåŒ¹é…æ‰€æœ‰æœªå‘½ä¸­çš„æµé‡
# ========================================
rules:
  # ========================================
  # AI æœåŠ¡è·¯ç”±è§„åˆ™
  # ========================================

  # Claude / Anthropic - ä½¿ç”¨ç¾å›½èŠ‚ç‚¹
  - DOMAIN-SUFFIX,anthropic.com,ğŸ¤– Claude
  - DOMAIN-SUFFIX,claude.ai,ğŸ¤– Claude
  - DOMAIN-KEYWORD,anthropic,ğŸ¤– Claude
  - DOMAIN-KEYWORD,claude,ğŸ¤– Claude

  # OpenAI - ChatGPT / GPT API
  - DOMAIN-SUFFIX,openai.com,ğŸŒ OpenAI
  - DOMAIN-SUFFIX,ai.com,ğŸŒ OpenAI
  - DOMAIN-KEYWORD,openai,ğŸŒ OpenAI
  - DOMAIN-KEYWORD,chatgpt,ğŸŒ OpenAI

  # Google Gemini / AI Studio
  - DOMAIN-SUFFIX,googleapis.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,generativelanguage.googleapis.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,google.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,googleusercontent.com,ğŸŒ å›½é™…æµé‡

  # å…¶ä»–ä¸»æµ AI æœåŠ¡
  - DOMAIN-SUFFIX,cohere.ai,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,mistral.ai,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,huggingface.co,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,replicate.com,ğŸŒ å›½é™…æµé‡

  # ========================================
  # å¼€å‘å·¥å…·å’Œå¹³å°
  # ========================================

  # GitHub
  - DOMAIN-SUFFIX,github.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,githubusercontent.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,github.io,ğŸŒ å›½é™…æµé‡

  # NPM / Yarn
  - DOMAIN-SUFFIX,npmjs.org,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,yarnpkg.com,ğŸŒ å›½é™…æµé‡

  # ========================================
  # å±€åŸŸç½‘å’Œæœ¬åœ°æµé‡ - ç›´è¿
  # ========================================
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT

  # ========================================
  # ä¸­å›½å¤§é™†åœ°å€ - ç›´è¿
  # ========================================
  - GEOIP,CN,DIRECT

  # ========================================
  # å…œåº•è§„åˆ™ - å…¶ä»–æ‰€æœ‰æµé‡
  # ========================================
  - MATCH,ğŸŒ å›½é™…æµé‡
