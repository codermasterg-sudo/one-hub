# Clash è®¢é˜…é…ç½®ç¤ºä¾‹
# æ”¯æŒ URL è®¢é˜…ã€å®šæ—¶åˆ·æ–°ã€è‡ªåŠ¨é€‰æ‹©ç¾å›½èŠ‚ç‚¹

# HTTP(S) å’Œ SOCKS5 ä»£ç†ç«¯å£
port: 7890
socks-port: 7891

# å…è®¸å±€åŸŸç½‘è¿æ¥
allow-lan: true

# Clash è¿è¡Œæ¨¡å¼: rule / global / direct
mode: rule

# æ—¥å¿—çº§åˆ«: info / warning / error / debug / silent
log-level: info

# RESTful API
external-controller: 0.0.0.0:9090

# ä»£ç†èŠ‚ç‚¹è®¢é˜…é…ç½®
proxy-providers:
  # ä¸»è®¢é˜…æº
  my-subscription:
    type: http
    url: "https://your-subscription-url.com/link?token=xxxxx"  # æ›¿æ¢ä¸ºæ‚¨çš„è®¢é˜…é“¾æ¥
    interval: 3600        # è‡ªåŠ¨æ›´æ–°é—´éš”ï¼ˆç§’ï¼‰ï¼Œ3600 = 1å°æ—¶
    path: ./subscriptions/my-subscription.yaml
    health-check:
      enable: true
      interval: 300       # å¥åº·æ£€æŸ¥é—´éš”ï¼ˆç§’ï¼‰
      url: http://www.gstatic.com/generate_204

  # å¯é€‰ï¼šç¬¬äºŒä¸ªè®¢é˜…æºï¼ˆå¤‡ç”¨ï¼‰
  # backup-subscription:
  #   type: http
  #   url: "https://backup-subscription-url.com/link?token=xxxxx"
  #   interval: 3600
  #   path: ./subscriptions/backup-subscription.yaml
  #   health-check:
  #     enable: true
  #     interval: 300
  #     url: http://www.gstatic.com/generate_204

# ä»£ç†ç»„é…ç½®
proxy-groups:
  # ç¾å›½èŠ‚ç‚¹ - è‡ªåŠ¨é€‰æ‹©æœ€å¿«çš„ç¾å›½èŠ‚ç‚¹
  - name: "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
    type: url-test          # è‡ªåŠ¨æµ‹é€Ÿé€‰æ‹©
    use:
      - my-subscription     # ä½¿ç”¨è®¢é˜…æº
    filter: "(?i)ç¾å›½|US|United States|America|Los Angeles|San Francisco|Silicon Valley|New York|Seattle|Chicago"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300           # æµ‹é€Ÿé—´éš”ï¼ˆç§’ï¼‰
    tolerance: 50           # å®¹å·®å€¼ï¼ˆmsï¼‰ï¼Œå»¶è¿Ÿå·®å¼‚å°äºæ­¤å€¼ä¸åˆ‡æ¢

  # é¦™æ¸¯èŠ‚ç‚¹ - å¤‡ç”¨
  - name: "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
    type: url-test
    use:
      - my-subscription
    filter: "(?i)é¦™æ¸¯|HK|Hong Kong|HongKong"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  # æ—¥æœ¬èŠ‚ç‚¹ - å¤‡ç”¨
  - name: "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹"
    type: url-test
    use:
      - my-subscription
    filter: "(?i)æ—¥æœ¬|JP|Japan|Tokyo|Osaka"
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  # æ‰‹åŠ¨é€‰æ‹©
  - name: "ğŸš€ æ‰‹åŠ¨é€‰æ‹©"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"
      - "ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹"
      - DIRECT
    use:
      - my-subscription     # ä¹Ÿå¯ä»¥æ‰‹åŠ¨é€‰æ‹©è®¢é˜…ä¸­çš„ä»»æ„èŠ‚ç‚¹

  # è‡ªåŠ¨é€‰æ‹© - ä»æ‰€æœ‰èŠ‚ç‚¹ä¸­é€‰æœ€å¿«çš„
  - name: "âš¡ è‡ªåŠ¨é€‰æ‹©"
    type: url-test
    use:
      - my-subscription
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

  # Claude / Anthropic ä¸“ç”¨ - ä½¿ç”¨ç¾å›½èŠ‚ç‚¹
  - name: "ğŸ¤– Claude"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"      # ä¼˜å…ˆä½¿ç”¨ç¾å›½èŠ‚ç‚¹
      - "âš¡ è‡ªåŠ¨é€‰æ‹©"        # å¤‡é€‰ï¼šè‡ªåŠ¨é€‰æ‹©
      - "ğŸš€ æ‰‹åŠ¨é€‰æ‹©"        # å¤‡é€‰ï¼šæ‰‹åŠ¨é€‰æ‹©
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"      # å¤‡é€‰ï¼šé¦™æ¸¯èŠ‚ç‚¹

  # OpenAI ä¸“ç”¨
  - name: "ğŸŒ OpenAI"
    type: select
    proxies:
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
      - "âš¡ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹"

  # å›½é™…æµé‡
  - name: "ğŸŒ å›½é™…æµé‡"
    type: select
    proxies:
      - "âš¡ è‡ªåŠ¨é€‰æ‹©"
      - "ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹"
      - "ğŸš€ æ‰‹åŠ¨é€‰æ‹©"
      - DIRECT

  # æ•…éšœè½¬ç§» - è‡ªåŠ¨åˆ‡æ¢å¯ç”¨èŠ‚ç‚¹
  - name: "â™»ï¸ æ•…éšœè½¬ç§»"
    type: fallback
    use:
      - my-subscription
    url: 'http://www.gstatic.com/generate_204'
    interval: 300

# è§„åˆ™é…ç½®
rules:
  # Claude / Anthropic ç›¸å…³åŸŸå - ä½¿ç”¨ç¾å›½èŠ‚ç‚¹
  - DOMAIN-SUFFIX,anthropic.com,ğŸ¤– Claude
  - DOMAIN-SUFFIX,claude.ai,ğŸ¤– Claude
  - DOMAIN-KEYWORD,anthropic,ğŸ¤– Claude
  - DOMAIN-KEYWORD,claude,ğŸ¤– Claude

  # OpenAI ç›¸å…³åŸŸå
  - DOMAIN-SUFFIX,openai.com,ğŸŒ OpenAI
  - DOMAIN-SUFFIX,ai.com,ğŸŒ OpenAI
  - DOMAIN-KEYWORD,openai,ğŸŒ OpenAI

  # Google Gemini
  - DOMAIN-SUFFIX,googleapis.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,generativelanguage.googleapis.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,google.com,ğŸŒ å›½é™…æµé‡

  # å…¶ä»– AI æœåŠ¡
  - DOMAIN-SUFFIX,cohere.ai,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,mistral.ai,ğŸŒ å›½é™…æµé‡

  # GitHub
  - DOMAIN-SUFFIX,github.com,ğŸŒ å›½é™…æµé‡
  - DOMAIN-SUFFIX,githubusercontent.com,ğŸŒ å›½é™…æµé‡

  # å±€åŸŸç½‘åœ°å€ - ç›´è¿
  - DOMAIN-SUFFIX,local,DIRECT
  - IP-CIDR,127.0.0.0/8,DIRECT
  - IP-CIDR,172.16.0.0/12,DIRECT
  - IP-CIDR,192.168.0.0/16,DIRECT
  - IP-CIDR,10.0.0.0/8,DIRECT

  # ä¸­å›½å¤§é™†åœ°å€ - ç›´è¿
  - GEOIP,CN,DIRECT

  # å…¶ä»–æµé‡ - ä½¿ç”¨å›½é™…æµé‡ç­–ç•¥
  - MATCH,ğŸŒ å›½é™…æµé‡
