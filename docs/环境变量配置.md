# çŽ¯å¢ƒå˜é‡é…ç½®è¯´æ˜Ž

æœ¬æ–‡æ¡£è¯´æ˜Žå¦‚ä½•åˆ›å»ºå’Œé…ç½® `.env` æ–‡ä»¶ã€‚

## ðŸ“‹ åˆ›å»º .env æ–‡ä»¶

.env æ–‡ä»¶åŒ…å«æ•æ„Ÿé…ç½®ä¿¡æ¯ï¼ˆæ•°æ®åº“å¯†ç ã€è®¢é˜…é“¾æŽ¥ç­‰ï¼‰ï¼Œå› æ­¤ä¸åŒ…å«åœ¨ Git ä»“åº“ä¸­ã€‚

åˆ›å»ºä¸€ä¸ªæ–°çš„ `.env` æ–‡ä»¶ï¼š

```bash
cat > .env << 'EOF'
# ==================== MySQL æ•°æ®åº“é…ç½® ====================
MYSQL_ROOT_PASSWORD=OneAPI@2024_SecurePassword
MYSQL_USER=oneapi
MYSQL_PASSWORD=OneAPI_Database_Pass2024
MYSQL_DATABASE=one-api

# ==================== One-Hub åº”ç”¨é…ç½® ====================
SQL_DSN=oneapi:OneAPI_Database_Pass2024@tcp(db:3306)/one-api
REDIS_CONN_STRING=redis://redis

# ä¼šè¯å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ä¸ºéšæœºå­—ç¬¦ä¸²ï¼‰
# ç”Ÿæˆæ–¹æ³•: openssl rand -hex 32
SESSION_SECRET=change_this_to_random_string_min_32_chars
USER_TOKEN_SECRET=change_this_to_random_string_min_32_chars
HASHIDS_SALT=change_this_to_random_salt

# æ—¶åŒº
TZ=Asia/Shanghai
EOF
```

## ðŸ” ç”Ÿæˆå®‰å…¨å¯†é’¥

ä½¿ç”¨ openssl ç”Ÿæˆéšæœºå¯†é’¥ï¼ˆæŽ¨èï¼‰ï¼š

```bash
# ç”Ÿæˆ SESSION_SECRET
openssl rand -hex 32

# ç”Ÿæˆ USER_TOKEN_SECRET
openssl rand -hex 32

# ç”Ÿæˆ HASHIDS_SALT
openssl rand -hex 16
```

ç„¶åŽæ›¿æ¢ .env æ–‡ä»¶ä¸­çš„å¯¹åº”å€¼ã€‚

## âš™ï¸ å¿…è¦çš„é…ç½®é¡¹

### MySQL é…ç½®

```bash
MYSQL_ROOT_PASSWORD=ä½ çš„MySQL rootå¯†ç 
MYSQL_USER=oneapi
MYSQL_PASSWORD=ä½ çš„æ•°æ®åº“å¯†ç 
MYSQL_DATABASE=one-api
```

### One-Hub é…ç½®

```bash
# æ•°æ®åº“è¿žæŽ¥å­—ç¬¦ä¸²ï¼ˆéœ€è¦ä¸Ž MYSQL_PASSWORD ä¸€è‡´ï¼‰
SQL_DSN=oneapi:ä½ çš„æ•°æ®åº“å¯†ç @tcp(db:3306)/one-api

# Redis è¿žæŽ¥
REDIS_CONN_STRING=redis://redis

# å®‰å…¨å¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼‰
SESSION_SECRET=ä½ ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²
USER_TOKEN_SECRET=ä½ ç”Ÿæˆçš„éšæœºå­—ç¬¦ä¸²
HASHIDS_SALT=ä½ ç”Ÿæˆçš„éšæœºç›å€¼

# æ—¶åŒº
TZ=Asia/Shanghai
```

## ðŸ”§ å¯é€‰é…ç½®é¡¹

### Clash ä»£ç†é…ç½®

å¦‚æžœéœ€è¦é€šè¿‡ Clash è®¿é—®å¤–éƒ¨ APIï¼Œåœ¨ .env ä¸­æ·»åŠ ï¼š

```bash
# ä»£ç†é…ç½®
HTTP_PROXY=http://clash:7890
HTTPS_PROXY=http://clash:7890
```

ç„¶åŽåœ¨ docker-compose.yml ä¸­å–æ¶ˆæ³¨é‡Šå¯¹åº”çš„çŽ¯å¢ƒå˜é‡ã€‚

### å¤šæœºéƒ¨ç½²é…ç½®

å¦‚æžœéœ€è¦å¤šæœºéƒ¨ç½²ï¼Œæ·»åŠ ä»¥ä¸‹é…ç½®ï¼š

```bash
NODE_TYPE=slave
SYNC_FREQUENCY=60
FRONTEND_BASE_URL=https://your-domain.com
```

## âœ… éªŒè¯é…ç½®

åˆ›å»º .env æ–‡ä»¶åŽï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
test -f .env && echo "âœ“ .env æ–‡ä»¶å­˜åœ¨" || echo "âœ— .env æ–‡ä»¶ä¸å­˜åœ¨"

# æ£€æŸ¥å…³é”®é…ç½®é¡¹
grep -q "SESSION_SECRET" .env && echo "âœ“ SESSION_SECRET å·²é…ç½®" || echo "âœ— SESSION_SECRET æœªé…ç½®"
grep -q "USER_TOKEN_SECRET" .env && echo "âœ“ USER_TOKEN_SECRET å·²é…ç½®" || echo "âœ— USER_TOKEN_SECRET æœªé…ç½®"
```

## ðŸ”’ å®‰å…¨æ³¨æ„äº‹é¡¹

1. **ä¸è¦æäº¤ .env æ–‡ä»¶åˆ° Git**
   - .env æ–‡ä»¶å·²åœ¨ .gitignore ä¸­ï¼Œç¡®ä¿ä¸ä¼šè¢«æäº¤

2. **å®šæœŸæ›´æ¢å¯†é’¥**
   - å»ºè®®å®šæœŸæ›´æ¢ SESSION_SECRET å’Œ USER_TOKEN_SECRET

3. **ä½¿ç”¨å¼ºå¯†ç **
   - MySQL å¯†ç è‡³å°‘ 16 ä½ï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
   - ä½¿ç”¨å¯†ç ç”Ÿæˆå™¨ç”Ÿæˆå¼ºå¯†ç 

4. **å¤‡ä»½é…ç½®**
   - å¤‡ä»½ .env æ–‡ä»¶åˆ°å®‰å…¨ä½ç½®
   - ä¸è¦å°†å¤‡ä»½æ–‡ä»¶æ”¾åœ¨å…¬å¼€çš„ç½‘ç»œä½ç½®

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿéƒ¨ç½²æŒ‡å—](./å¿«é€Ÿéƒ¨ç½²æŒ‡å—.md) - å®Œæ•´çš„éƒ¨ç½²æµç¨‹
- [Dockeréƒ¨ç½²æŒ‡å—](./Dockeréƒ¨ç½²æŒ‡å—.md) - Docker ç›¸å…³é…ç½®
