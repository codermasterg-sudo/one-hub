# One-Hub 生产环境配置
# 请根据实际情况修改以下配置项

# ==================== MySQL 数据库配置 ====================
MYSQL_ROOT_PASSWORD=OneAPI@2024_SecurePassword
MYSQL_USER=oneapi
MYSQL_PASSWORD=OneAPI_Database_Pass2024
MYSQL_DATABASE=one-api

# ==================== One-Hub 应用配置 ====================
# 数据库连接字符串
SQL_DSN=oneapi:OneAPI_Database_Pass2024@tcp(db:3306)/one-api

# Redis 连接字符串
REDIS_CONN_STRING=redis://redis

# 会话密钥（必须修改为随机字符串，用于加密会话）
# 生成方法: openssl rand -hex 32
SESSION_SECRET=change_this_to_random_string_min_32_chars_abcdef1234567890

# 用户令牌密钥（必须修改为随机字符串，32位以上）
# 生成方法: openssl rand -hex 32
USER_TOKEN_SECRET=change_this_to_random_string_min_32_chars_fedcba0987654321

# HashIDS 盐值（可选，建议设置，字符串元素不能重复）
# 生成方法: openssl rand -hex 16
HASHIDS_SALT=unique_random_salt_1234567890abcdef

# 时区
TZ=Asia/Shanghai

# ==================== 代理配置 ====================
# 如果需要通过 Clash 代理访问外部 API，启用以下配置
# HTTP_PROXY=http://clash:7890
# HTTPS_PROXY=http://clash:7890

# ==================== 多机部署配置（可选）====================
# 从节点配置，单机部署请注释掉
# NODE_TYPE=slave
# SYNC_FREQUENCY=60
# FRONTEND_BASE_URL=https://your-domain.com

# ==================== Clash 代理配置 ====================
# Clash HTTP/HTTPS 代理端口
CLASH_HTTP_PORT=7890

# Clash SOCKS5 代理端口
CLASH_SOCKS_PORT=7891

# Clash API 和 Dashboard 端口
CLASH_API_PORT=9090

# Clash 运行模式: rule (规则分流) / global (全局代理) / direct (全局直连)
CLASH_MODE=rule

# Clash 日志级别: silent / error / warning / info / debug
CLASH_LOG_LEVEL=info

# Clash 订阅链接（支持机场订阅）
# ⚠️ 重要：请替换为您的实际订阅链接
# 获取方式：从您的机场服务商获取 Clash 订阅链接
# 示例：https://sub.example.com/link/xxxxxxxxxxxxx?clash=1
CLASH_SUBSCRIPTION_URL=https://your-subscription-url.com/link?token=change_this

# Clash 订阅自动更新间隔（秒）
# 3600 = 1小时, 7200 = 2小时, 86400 = 1天
CLASH_SUBSCRIPTION_INTERVAL=3600

# 节点健康检查间隔（秒）
CLASH_HEALTH_CHECK_INTERVAL=300

# 节点测速间隔（秒）
CLASH_SPEEDTEST_INTERVAL=300

# 节点延迟容差（毫秒）- 延迟差异小于此值不切换节点
CLASH_TOLERANCE=50

# ==================== CLIProxy 配置 ====================
# CLIProxy API 端口
CLIPROXY_PORT=8080

# 日志级别: debug, info, warn, error
CLIPROXY_LOG_LEVEL=info

# 日志格式: text, json
CLIPROXY_LOG_FORMAT=text

# 负载均衡策略: round_robin (轮询) / weighted (加权) / least_connections (最少连接) / random (随机)
CLIPROXY_LOAD_BALANCE_STRATEGY=round_robin

# 是否启用流式响应
CLIPROXY_STREAMING=true

# 是否启用函数调用
CLIPROXY_FUNCTION_CALLING=true

# 是否启用多模态支持（图像）
CLIPROXY_MULTIMODAL=true

# 请求超时时间（秒）
CLIPROXY_REQUEST_TIMEOUT=300

# 最大并发请求数
CLIPROXY_MAX_CONCURRENT_REQUESTS=50

# 连接池最大连接数
CLIPROXY_MAX_CONNECTIONS=100

# OAuth2 令牌自动刷新间隔（秒）
CLIPROXY_REFRESH_INTERVAL=3600

# OAuth2 令牌提前刷新时间（秒）- 在过期前多久刷新
CLIPROXY_REFRESH_BEFORE_EXPIRY=600

# ==================== 监控配置（可选）====================
# 是否启用 Prometheus 监控
ENABLE_PROMETHEUS=false

# Prometheus 指标端口
PROMETHEUS_PORT=9091
